{"html":"<selectorrect target=\"targetElement\" rectangleflag=\"rectangleflag\"></selectorrect>\n<box ng-repeat=\"item in folderItems | filter: { extension: '.dir' }\" bootstrapped=\"usebootstrap \" model=\"item\" clickable draggable></box>\n<item ng-repeat=\"item in folderItems | filter: { extension: '!.dir' }\" bootstrapped=\"usebootstrap\" model=\"item\" clickable draggable></item>\n<contextmenu ng-if=\"contextVisible\" targets=\"selectedObjects\" pos=\"contextpos\" path=\"path\"></contextmenu>","css":".desktopFolderYellow{\n  color:#F9D978;\n}","js":"(function(){ //return object inside an anonymous function\n  return {\n    title:\"System.Dir\",\n    fa:\"fa-folder\",\n    //img:\"link\", //Use img for image or fa for icon from fontawesome.\n    bind:{\n        contextmenu: [{\n          \textension: \"dir\",\n            title:\"Open\",\n            action: function(extensionid, targets, path, $injector){\n                CBapi.createWindow(extensionid, args);\n            },\n            fa:\"fa-folder\"\n        },{\n          \textension: \"dir\",\n            title:\"Rename\",\n            action: function(extensionid, targets, path, $injector){\n                console.log(targets);\n            },\n            fa:\"fa-pencil\"\n        },{\n          \textension: \"!\",\n            title:\"Create Folder\",\n            action: function(extensionid, targets, path, $injector){\n                var folderName = prompt(\"Please enter a folder name\");\n              \talert(folderName)\n            },\n            fa:\"fa-folder desktopFolderYellow\"\n        },{\n          \textension: \"!\",\n            title:\"Create File\",\n            action: function(extensionid, targets, path, $injector){\n                var folderName = prompt(\"Please enter a file name\");\n              \talert(folderName)\n            },\n            fa:\"fa-file\"\n        }],\n      \tclick:[{\n        \textension: \"dir\",\n          \taction: function(extensionid, args){\n                CBapi.createWindow(extensionid, args);\n            }\n        }]\n    },\n    oninstall: function($injector){\n      \t//$injector.get(\"IconManager\").addIcon(\"txt\",\"fa\",\"fa fa-file-text\");\n      \t$injector.get(\"IconManager\").addIcon(\"dir\",\"fa\",\"fa fa-folder desktopFolderYellow\");\n    },\n    sidebar:true, //show on sidebar\n    window:{ //Default\n      \ttitle:\"File Explorer\", //scope.window.title\n      \tfa:\"fa-folder desktopFolderYellow\",\n      \timg:null,\n    },\n    controller: function(scope, element, attrs, $injector){ //use controller if you have window.\n      \t//You will recieve 4 objects as arguments\n      \t//Scope will be your scope, js...\n\t\t//Element will be the target dom element\n\t\t//Attr will be your attributes if defined\n\t\t//$Injector will help you to inject modules in to your controller\n\t\t$injector.get(\"StorageLibrary\").getPathItems(scope.args.path, function(list){\n        \tscope.folderItems = list;\n        });\n\t\tscope.contextVisible = false;\n      \tscope.contextmenu = function (e) {\n            scope.selectedObjects = scope.folderItems.filter(function (obj) {\n                return obj.selected;\n            });\n            scope.contextpos = {\n              \tleft:  e.pageX - $(element).parent().offset().left,\n              \ttop: e.pageY - ($(element).parent().offset().top + 25),\n            }\n            scope.contextVisible = true;\n            e.stopPropagation();\n          \te.preventDefault();\n        }\n\t\t\n      \tscope.targetElement = element;\n\t\tscope.usebootstrap = true;\n      \tscope.rectangleflag = false;\n      \n      \tscope.$on('clickonbox', function (event, target) {\n            scope.contextVisible = false;\n        });\n      \n      \telement.bind(\"contextmenu\", scope.contextmenu);\n\t\telement.bind(\"click\", function(){\n\t\t\tif (scope.rectangleflag) {\n                scope.rectangleflag = false;\n            } else {\n                scope.$broadcast('unselect');\n                scope.contextVisible = false;\n            }\n\t\t});\n      \tconsole.log(scope.args);\n\t\tscope.path = scope.args.path;\n\t\tif(scope.args instanceof Array){\n          scope.window.title = \"File Explorer \" + scope.args[0].title;\n        }else{\n          scope.window.title = \"File Explorer \" + scope.args.title; \n        }\t\n    }\n  };\n})();","name":"tazdingo","category":"Misc","_id":"gmjzwjwg"}