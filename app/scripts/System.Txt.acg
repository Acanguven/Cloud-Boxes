{"html":"<div class=\"texteditor\">\n\t<textarea ng-model=\"text\"></textarea>\n    <button class=\"btn btn-success\" ng-if=\"changedText != text\" ng-click=\"save()\">Save</button>\n</div>","css":".texteditor textarea{\n  \twidth: 100%;\n    height: 420px;\n}","js":"(function(){ //return object inside an anonymous function\n  return {\n    title:\"System.Txt\",\n    fa:\"fa-file-text-o\",\n    //img:\"link\", //Use img for image or fa for icon from fontawesome.\n    bind:{\n        contextmenu: [{\n          \textension: \"txt\",\n            title:\"Open\",\n            action: function(extensionid, targets, path, $injector){\n                CBapi.createWindow(extensionid, targets[0]);\n            },\n            fa:\"fa-file-text-o\"\n        }],\n      \tclick:[\n            {\n                extension: \"txt\",\n                action: function(extensionid, args){\n                    CBapi.createWindow(extensionid, args);\n                }\n            }\n        ]\n    },\n    oninstall: function($injector){\n      \t$injector.get(\"IconManager\").addIcon(\"txt\",\"fa\",\"fa fa-file-text-o\");\n    },\n    window:{ //Default\n      \ttitle:\"Text Editor\", //scope.window.title\n      \tfa:\"fa-file-text-o\",\n      \timg:null,\n    },\n    controller: function(scope, element, attrs, $injector){ //use controller if you have window.\n      \t//You will recieve 4 objects as arguments\n      \t//Scope will be your scope, js...\n\t\t//Element will be the target dom element\n\t\t//Attr will be your attributes if defined\n\t\t//$Injector will help you to inject modules in to your controller\n      \tscope.changedText = \"\"\n      \t$injector.get(\"StorageLibrary\").readFileAsText(scope.args.path, \"utf8\",function(str){\n\t\t\tscope.text = str;\n          \tscope.changedText = angular.copy(str);\n\t\t});\n      \n      \telement.bind(\"mousedown\", function(e){\n        \te.stopPropagation();\n        });\n      \n        scope.save = function(){\n\t\t\t$injector.get(\"StorageLibrary\").saveFileAsText(scope.text, scope.args.path, \"utf8\",function(){\n              scope.changedText = angular.copy(scope.text);\n          \t});\n        }\n    }\n  };\n})();","name":"System.Txt","category":"Office","_id":"5845caf6b2b200458041ae13","newCreated":false}