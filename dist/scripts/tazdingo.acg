{"js":"(function(){ //return object inside an anonymous function\n  return {\n    title:\"Minefield\",\n    fa:null,\n    img:\"http://cdn3.volusion.com/zzjhm.catdw/v/vspfiles/photos/698-2.jpg\", //Use img for image or fa for icon from fontawesome.\n    sidebar:{\n\t\ttitle:\"Minefield\",\n      \timg:\"http://cdn3.volusion.com/zzjhm.catdw/v/vspfiles/photos/698-2.jpg\",\n      \tfa:null,\n      \tonclick: function(id){\n         \t CBapi.createWindow(id, {});\n        }\n\t},\n    window:{ //Default\n      \ttitle:\"Minefield\", //scope.window.title\n      \tfa:\"\",\n      \timg:\"http://cdn3.volusion.com/zzjhm.catdw/v/vspfiles/photos/698-2.jpg\",\n    },\n    controller: function(scope, element, attrs, $injector){ //use controller if you have window.\n\t\tscope.tarla = [];\n      \tscope.mineTotal = 20;\n      \t\n      \tscope.generateGame = function(){\n          scope.tarla = [];\n          for(var x = 0; x < 20; x++){\n              var rowArr = [];\n              for(var z = 0; z < 25; z++){\n                if(Math.floor(Math.random() * 10) > 6){\n                  rowArr.push({mine:true, number:0, opened:false, flagged:false});\n                }else{\n                  rowArr.push({mine:false, number:0, opened:false, flagged:false}); \n                }\n              }\n              scope.tarla.push(rowArr);\n          }\n          \n          for(var x = 0; x < 20; x++){\n            for(var z = 0; z < 25; z++){\n              if(!scope.tarla[x][z].mine){\n               \tvar mineCount = 0;\n                if(scope.tarla[x-1]){\n                  \tif(scope.tarla[x-1][z-1]){\n                  \t\tmineCount += scope.tarla[x-1][z-1].mine ? 1 : 0\n                \t}\n                  \tif(scope.tarla[x-1][z+1]){\n                  \t\tmineCount += scope.tarla[x-1][z+1].mine ? 1 : 0\n                \t}\n                                                      \n                    mineCount += scope.tarla[x-1][z].mine ? 1 : 0\n                }\n                if(scope.tarla[x+1]){\n                  \tif(scope.tarla[x+1][z-1]){\n                  \t\tmineCount += scope.tarla[x+1][z-1].mine ? 1 : 0\n                \t}\n                  \tif(scope.tarla[x+1][z+1]){\n                  \t\tmineCount += scope.tarla[x+1][z+1].mine ? 1 : 0\n                \t}\n                  \tmineCount += scope.tarla[x+1][z].mine ? 1 : 0\n                }\n                if(scope.tarla[x][z-1]){\n\t\t\t\t\tmineCount += scope.tarla[x][z-1].mine ? 1 : 0\n                }\n                if(scope.tarla[x][z+1]){\n\t\t\t\t\tmineCount += scope.tarla[x][z+1].mine ? 1 : 0\n                }    \n                \n\t\t\t\tscope.tarla[x][z].number = mineCount;\n              }\n            }\n          }\n      \t}\n        scope.generateGame();\n        \n      \tscope.cc = function(e){\n          \tconsole.log(123);\n         \t e.stopPropagation();\n        }\n      \n        $(document).on('contextmenu', '.minecontainer', function(e){\n          \tconsole.log(\"c\");\n            e.stopPropagation();\n        });\n              \n      \tscope.handleClick = function($event, cell){\n          switch($event.which) {\n              case 1:\n                  if(cell.mine){\n                      for(var x = 0; x < 20; x++){\n                        for(var z = 0; z < 25; z++){\n                          scope.tarla[x][z].opened = true;\n                        }\n                      }\n                      setTimeout(function(){\n                      \tscope.generateGame(); \n                      },3000)\n                  }else{\n                      cell.opened = true;\n                  }\n                  break;\n              case 2:\n                  cell.flagged = !cell.flagged;\n              \t\t\t$event.stopPropagation();\n                  break;\n              case 3:\n              \tcell.flagged = !cell.flagged;\n              \t\t\t$event.stopPropagation();\n                  break;\n              default:\n                  alert(\"you have a strange mouse!\");\n                  break;\n          }\n        }\n    }\n  }\n})();","css":".cell{\n \tfloat: left;\n    width: 4%;\n    height: 100%; \n  \tbox-shadow:0px 0px 0px 0.2px #000;\n  \tpadding-left: 6px;\n    padding-top: 3px;\n}\n\n.mineRow{\n \theight:25px; \n}\n\n.minecontainer{\n \theight:500px; \n}","html":"<div class=\"minecontainer\">\n\t<div class=\"mineRow\" ng-repeat=\"row in tarla track by $index\">\n    \t<div class=\"cell\" ng-repeat=\"cell in row track by $index\" ng-mousedown=\"handleClick($event, cell)\" on>\n        \t<span ng-if=\"cell.opened && !cell.mine\">{{cell.number}}</span>\n\t\t\t<span ng-if=\"cell.opened && cell.mine\" style=\"color:red;\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></span>\n\t\t\t<span ng-if=\"cell.flagged\"><i class=\"fa fa-flag\" aria-hidden=\"true\"></i></span>\n        </div>\n    </div>\n</div>"}