"use strict";(function(){var a;a=angular.module("angularWebSpeechDirective",[]),a.service("jsSpeechFactory",["$rootScope",function(a){var b,c,d,e;return e=/\n\n/g,d=/\n/g,b=/\S/,c={icons:{start:"http://goo.gl/2bfneP",recording:"http://goo.gl/p2jHO9",blocked:"http://goo.gl/vd4AKi"},messages:{info_speak_now:'Speak now... or <a href="#" ng-click="reset()">Cancel</a>',info_stop:"Proccessing your voice...",info_no_speech:'No Speech was detected. You may need to adjust your <a href="//support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892">microphone settings</a>.',info_no_mic:"No microphone was found. Ensure that a microphone is installed.",info_blocked:'Permission to use microphone is blocked. To change, go to <a href="chrome://settings/contentExceptions#media-stream">chrome://settings/contentExceptions#media-stream</a>.',info_denied:"Permission to use microphone was denied.",info_setup:"Click on the microphone icon to enable Web Speech.",info_upgrade:'Web Speech API is not supported by this browser. Upgrade to <a href="//www.google.com/chrome" target="_blank">Chrome</a> version 25 or later.',info_allow:'Click the "Allow" button above to enable your microphone.'},linebreak:function(a){return a.replace(e,"<p></p>").replace(d,"<br>")},capitalize:function(a){return a.replace(b,function(a){return a.toUpperCase()})}}}]),a.directive("jsSpeech",["jsSpeechFactory",function(a){return{restrict:"AE",replace:!0,transclude:!0,require:"^ngModel",scope:{ngModel:"="},template:'<div class="jsSpeechFactory-container">\n<a href="" class="jsSpeechFactory-btn" ng-click="toggleStartStop()">\n\n  <i class="fa fa-microphone fa-2x" ng-hide="ngModel.recognizing"></i>\n  <i class="fa fa-microphone-slash fa-2x" ng-show="ngModel.recognizing"></i>\n\n</a>\n<input type="text" class="form-control" ng-model="ngModel.value"/>\n<p class="text-muted jsSpeechFactory-hint" ng-bind-html-unsafe="speech.msg"></p>\n</div>',link:function(b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p;return f=b,k=!1,j=null,f.speech={msg:a.messages.info_setup,icon:a.icons.start,recognizing:!1},b.$watch("ngModel",function(a,b){return console.log(a)},!0),m=function(a){var c;return c=b.$root.$$phase,"$apply"!==c&&"$digest"!==c?b.$apply(a):a&&"function"==typeof a?a():void 0},o=function(b){return m(function(){return f.speech.msg=a.messages[b]})},n=function(b){return m(function(){return f.speech.icon=a.icons[b]})},g=function(){return l(),"webkitSpeechRecognition"in window?(j=new webkitSpeechRecognition,j.continuous=!0,j.interimResults=!0,j.onerror=onerror,j.onend=l,j.onresult=h,j.onstart=i):(j={},p())},p=function(){return o("info_upgrade"),n("blocked")},i=function(a){var b;return f.ngModel.recognizing=!0,n("recording"),o("info_speak_now"),console.log("onstart",a),b=function(a,b){switch(console.log("onerror",a,b),f.ngModel.recognizing=!1,a.error){case"not-allowed":return o("info_blocked");case"no-speech":return o("info_no_speech");case"service-not-allowed":return o("info_denied");default:return console.log(a)}}},h=function(b){var c,d,e,g,h;for(n("recording"),o("info_speak_now"),e=b.resultIndex,g="",c=e,h=[];c<b.results.length;)d=b.results[c][0],g=a.capitalize(d.transcript),m(function(){return f.ngModel.interimResults=g,f.ngModel.value=g,f.ngModel.recognizing=!0}),b.results[c].isFinal&&m(function(){return f.ngModel.value=g,f.ngModel.recognizing=!1}),h.push(++c);return h},l=function(a){return console.log("reset",a),f.ngModel.recognizing=!1,n("start"),o("info_setup"),f.abort=function(){return f.toggleStartStop()}},f.toggleStartStop=function(){return f.ngModel.recognizing?(j.stop(),l()):(j.start(),f.ngModel.recognizing=!0,n("blocked"))},g()}}}])}).call(this);var providers={};angular.module("CloudBoxes",["ngAnimate","ngCookies","ngSanitize","ngTouch","angularWebSpeechDirective"],["$controllerProvider","$compileProvider","$provide",function(a,b,c){providers={$controllerProvider:a,$compileProvider:b,$provide:c}}]).config(["$httpProvider",function(a){a.interceptors.push(["$q",function(a){return{request:function(b){if(("localhost"===location.hostname||"127.0.0.1"===location.hostname)&&"3000"!=location.port){var c=location.origin+":3000";-1==b.url.indexOf("views")&&"localhost"==location.hostname&&-1==b.url.indexOf(".acg")&&(b.url=c+b.url)}if(b.url.indexOf("/api/")>-1&&localStorage.getItem("token")){var d=localStorage.getItem("token");b.headers.Authorization=d}return b||a.when(b)}}}]),a.interceptors.push(["$q",function(a){return{response:function(a){if(a.data&&a.data.token&&localStorage.setItem("token",a.data.token),a.data&&a.data.message)switch(a.data.message){case"Token error":case"Token decoding error":case"Token expired":case"Token user does not exist":}return a}}}])}]).run(["$http","$rootScope","$timeout","UserFactory",function(a,b,c,d){localStorage.getItem("token")&&a.get("/api/user/continueTokenSession").then(function(a){a.data.token&&d.setUser(a.data)})}]),angular.module("CloudBoxes").controller("MainCtrl",["$scope","UserFactory","SidebarManager",function(a,b,c){a.UserFactory=b,a.SidebarManager=c,a.activeWindow="",a.$watch(function(){return c.getActiveWindow()},function(b,c){a.activeWindow=b})}]),angular.module("CloudBoxes").controller("LoginCtrl",["$scope","UserFactory",function(a,b){a.mode=!1,a.tryLogin=function(a,c){b.login(a,c)},a.tryRegister=function(a,c,d,e){c==d&&b.register(a,c,e)},a.swapMode=function(){a.mode=!a.mode}}]),angular.module("CloudBoxes").factory("StorageLibrary",["$http",function(a){return{getDesktopItems:function(b){a.post("/api/fs/getPathFolders",{folderpath:"/"}).then(function(a){b(a.data)})},getPathItems:function(b,c){a.post("/api/fs/getPathFolders",{folderpath:b}).then(function(a){c(a.data)})},createFolder:function(b,c){a.post("/api/fs/createFolder",{folderpath:b}).then(function(a){cb()})},renamePath:function(a,b){},readFileAs64:function(b,c){a.post("/api/fs/readEncoded",{filepath:b}).then(function(a){c(a.data)})},readFileAsText:function(b,c,d){a.post("/api/fs/readText",{filepath:b,format:c}).then(function(a){d(a.data)})},saveFileAsText:function(b,c,d,e){a.post("/api/fs/saveText",{filepath:c,format:d,data:b}).then(function(a){e()})},createFile:function(b,c){a.post("/api/fs/createFile",{filepath:b}).then(function(a){c()})}}}]),angular.module("CloudBoxes").factory("UserFactory",["$http","ExtensionManager",function(a,b){function c(){b.updateExtensions(d.extensions)}var d=null;return{getUserId:function(){return d._id},userLoggedIn:function(){return null!==d},setUser:function(a){d=a,c()},login:function(b,e){a.post("/api/user/login",{username:b,password:e}).then(function(a){a.data.token&&(d=a.data,c())})},register:function(b,e,f){a.post("/api/user/register",{username:b,password:e,name:f}).then(function(a){a.data.token&&(d=a.data,c())})},addExtension:function(b){d.extensions.push(b),a.post("/api/user/updateExtensions",d.extensions),c()},removeExtension:function(b){for(var e=-1,f=0;f<d.extensions.length;f++)d.extensions[f]._id==b._id&&(e=f);-1!=e&&d.extensions.splice(e,1),a.post("/api/user/updateExtensions",d.extensions),c()},isExtensionInstalled:function(a){for(var b=0;b<d.extensions.length;b++)if(d.extensions[b]._id==a._id)return!0;return!1},getExtensions:function(){return d.extensions}}}]),angular.module("CloudBoxes").controller("SidebarCtrl",["$scope","SidebarManager","Windowmanager","ExtensionManager","$timeout",function(a,b,c,d,e){a.activeWindow="",a.SidebarManager=b,a.runningWindows=c.getRunningWindows(),e(function(){a.registeredExtensions=d.getSidebarApps()},1e3),a.$watch(function(){return b.getActiveWindow()},function(b,c){a.activeWindow=b}),a.clickSidebar=function(a){a.onclick(a._id)}}]),angular.module("CloudBoxes").controller("BoxesCtrl",["$rootScope","$scope","StorageLibrary","$element","$interval","$timeout","$compile",function(a,b,c,d,e,f,g){function h(a){for(var b=0,c=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:c,left:b}}c.getDesktopItems(function(a){b.desktopItems=a}),b.path="/",b.rectangleflag=!1,b.contextVisible=!1,b.click=function(){b.rectangleflag?b.rectangleflag=!1:(b.$broadcast("unselect"),b.contextVisible=!1)},b.deskTopElement=document.getElementById("deskTopElement"),angular.element(document).ready(function(){b.targetOffset=h(b.deskTopElement)}),b.contextmenu=function(a){b.selectedObjects=b.desktopItems.filter(function(a){return a.selected}),b.contextpos={left:a.pageX-b.targetOffset.left,top:a.pageY-b.targetOffset.top},b.contextVisible=!0,a.preventDefault()},d.bind("contextmenu",b.contextmenu),d.bind("click",b.click),b.$on("clickonbox",function(a,c){b.contextVisible=!1}),a.$on("createWindow",function(a,c){d.injector().invoke(["$compile","$rootScope",function(a,e){var f=b.$new(!0);f.args=c.args,d.append(a("<d"+c.id+"></d"+c.id+">")(f))}])})}]),angular.module("CloudBoxes").controller("SpeechanalyzerCtrl",["$scope","$interval",function(a,b){a.recognizing=!1,a.lastUpdate=Date.now(),a.validSearch=!1,a.reset=function(b){a.recognizing=!1},a.onresult=function(b){a.validSearch=!1,a.recognizing=!0,a.lastUpdate=Date.now();for(var c=b.resultIndex,d=c;d<b.results.length;){var e=b.results[d][0],f=e.transcript;a.$apply(function(){a.searchtext=f}),b.results[d].isFinal&&(a.searchtext=f),++d}},a.onerror=function(a,b){},a.onstart=function(a){},b(function(){a.recognizing&&Date.now()-a.lastUpdate>2e3&&(a.recognizing=!1,a.searchValidation())},500);var c=[{regex:/(search) for ((?!\s).)/gi,action:function(a){5==a.length}},{regex:/(google) for ((?!\s).)/gi,action:function(a){5==a.length}}];a.searchValidation=function(){for(var b=a.searchtext,d=0;d<c.length;d++)for(var e;null!==(e=c[d].regex.exec(b));)e.index===c[d].regex.lastIndex&&c[d].regex.lastIndex++,a.validSearch=!0,c[d].action(e)},a.refreshApi=function(){a.recognition=new webkitSpeechRecognition,a.recognition.continuous=!0,a.recognition.interimResults=!0,a.recognition.onerror=a.onerror,a.recognition.onend=a.reset,a.recognition.onresult=a.onresult,a.recognition.onstart=a.onstart,a.recognition.start()};var d=Date.now();a.refreshApi(),b(function(){d+45e3<Date.now()&&!a.recognizing&&(a.refreshApi(),d=Date.now())},1e3),a.$on("$destroy",function(){a.recognition.stop()})}]),angular.module("CloudBoxes").factory("SidebarManager",function(){var a="boxes";return{getActiveWindow:function(){return a},setActiveWindow:function(b){a=b}}}),angular.module("CloudBoxes").directive("box",["$timeout","IconManager","$rootScope",function(a,b,c){return{replace:!0,template:"<div class='desktopfolder' ng-class=\"{'selected':model.selected, 'col-md-2':bootstrapped === true}\"><i ng-if='itemIconData.type == \"fa\"' ng-class='itemIconData.data' aria-hidden='true'></i><p>{{model.title}}</p></div>",restrict:"E",link:function(a,d,e){d[0].style.left=a.model.position.x+"px",d[0].style.top=a.model.position.y+"px",a.model.selected=!1,a.itemIconData=b.getIcon(a.model.extension),a.$on("selectorRectangle",function(b){var c=d.position(),e=$(".selectorRect").position(),f=c.left,g=c.top,h=c.left+d.width(),i=c.top+d.height(),j=e.left,k=e.top,l=e.left+$(".selectorRect").width(),m=e.top+$(".selectorRect").height(),n=Math.max(0,Math.min(h,l)-Math.max(f,j)),o=Math.max(0,Math.min(i,m)-Math.max(g,k)),p=n*o;p>0?a.$apply(function(){a.model.selected=!0}):a.$apply(function(){a.model.selected=!1})}),a.$on("unselect",function(b,c){c&&c==d||a.$apply(function(){a.selected=!1,a.model.selected=!1})}),c.$on("refreshIcon",function(c,d){console.log(b.getIcon(a.model.extension)),a.itemIconData=b.getIcon(a.model.extension)})},scope:{model:"=",bootstrapped:"="}}}]),angular.module("CloudBoxes").controller("TopbarCtrl",["$scope","SidebarManager","$element",function(a,b,c){a.activeWindow="",a.SidebarManager=b,a.$watch(function(){return b.getActiveWindow()},function(b,c){a.activeWindow=b}),a.toggleFullScreen=function(){var a=document.getElementById("overlay");void 0!==document.fullScreenElement&&null===document.fullScreenElement||void 0!==document.msFullscreenElement&&null===document.msFullscreenElement||void 0!==document.mozFullScreen&&!document.mozFullScreen||void 0!==document.webkitIsFullScreen&&!document.webkitIsFullScreen?a.requestFullScreen?a.requestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullScreen?a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):a.msRequestFullscreen&&a.msRequestFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}}]),angular.module("CloudBoxes").factory("ExtensionManager",["$rootScope","$injector","Cssmanager",function($rootScope,$injector,Cssmanager){function insertArrayAt(a,b,c){return Array.prototype.splice.apply(a,[b,0].concat(c)),a}var extensionList={},bindings=[],sidebars=[],setupExtension=function(a){a.js.oninstall&&a.js.oninstall($injector),Cssmanager.addUpdateCss(a._id,a.css);var b=angular.module("CloudBoxes")._invokeQueue.length;if(a.js.window){if(!extensionList[a._id]){angular.module("CloudBoxes").directive("d"+a._id,["ExtensionManager","$injector",function(b,c){return{template:"<div class='extensionWindow' extensionwindow ng-show='!minimized' ng-class=\"{'maximized':(windowStatus==2)}\"><div class='header'><i ng-if='window.fa && !window.img' class='fa' ng-class='window.fa'></i><img ng-if='window.img' ng-src='{{window.img}}'/><div class='title'>{{window.title}}</div><div class='options'><span ng-click='minimize()'><i class='fa fa-window-minimize' aria-hidden='true'></i></span><span ng-click='windowStatusUpdate(2)' ng-if='windowStatus != 2'><i class='fa fa-window-maximize' aria-hidden='true'></i></span><span  ng-click='windowStatusUpdate(1)' ng-if='windowStatus == 2'><i class='fa fa-window-restore' aria-hidden='true'></i></span><span  ng-click='windowClose()'><i class='fa fa-times' aria-hidden='true'></i></span></div></div><div class='windowContent' bindhtmlcompile='template'></div></div>",restrict:"E",replace:!0,link:function(d,e,f){d.template=b.getExtensionData(a._id).html;var g=angular.element(e[0].querySelector(".windowContent"));d.window=a.js.window,b.getExtensionData(a._id).js(d,g,f,c)}}}]);for(var c=angular.module("CloudBoxes")._invokeQueue,d=b;d<c.length;d++){var e=c[d],f=providers[e[0]];f&&f[e[1]].apply(f,e[2])}}extensionList[a._id]={js:a.js.controller,css:a.css,html:a.html},setBindings(a)}else setBindings(a);if(a.js.sidebar){var g=angular.copy(a.js.sidebar);g._id=a._id,sidebars.push(g)}},setBindings=function(a){if(clearBindings(a._id),a.js&&a.js.bind)for(var b in a.js.bind)switch(b){case"contextmenu":if(a.js.bind[b]instanceof Array)for(var c=0;c<a.js.bind[b].length;c++)a.js.bind[b][c].extension&&"string"==typeof a.js.bind[b][c].extension?a.js.bind[b][c].title&&"string"==typeof a.js.bind[b][c].title?a.js.bind[b][c].action&&"function"==typeof a.js.bind[b][c].action?bindings.push({type:"contextmenu",extensionid:a._id,extension:a.js.bind[b][c].extension,title:a.js.bind[b][c].title,action:a.js.bind[b][c].action,fa:a.js.bind[b][c].fa?a.js.bind[b][c].fa:!1,img:a.js.bind[b][c].img?a.js.bind[b][c].img:!1}):console.error(a.name,"Passed "+b+"["+c+"] doesnt have valid action, pass a function"):console.error(a.name,"Passed "+b+"["+c+"] doesnt have valid title"):console.error(a.name,"Passed "+b+"["+c+"] doesnt have valid extension type, you can use * for all");else console.error(a.name,"Passed bind property "+b+" is not type of Array");break;case"click":if(a.js.bind[b]instanceof Array)for(var c=0;c<a.js.bind[b].length;c++)a.js.bind[b][c].extension&&"string"==typeof a.js.bind[b][c].extension?a.js.bind[b][c].action&&"function"==typeof a.js.bind[b][c].action?bindings.push({type:"click",extensionid:a._id,extension:a.js.bind[b][c].extension,action:a.js.bind[b][c].action}):console.error(a.name,"Passed "+b+"["+c+"] doesnt have valid action, pass a function"):console.error(a.name,"Passed "+b+"["+c+"] doesnt have valid extension type, you can use * for all");else console.error(a.name,"Passed bind property "+b+" is not type of Array")}},clearBindings=function(a){bindings=bindings.filter(function(b){return b.extensionid!=a})};this.createWindow=function(a){$injector.get("$rootScope").$emit("createWindow",a)};var self=this;return document.addEventListener("CBOutside",function(a){self[a.detail.type]&&self[a.detail.type](a.detail.args)}),{tryExtension:function(a){setupExtension(a)},getContextBindings:function(a){return bindings.filter(function(b){return(""!=a&&"*"==b.extension||b.extension==a||"!"==b.extension)&&"contextmenu"==b.type})},getExtensionData:function(a){return extensionList[a]},getClickBindings:function(a){return bindings.filter(function(b){return(""!=a&&"*"==b.extension||b.extension==a||"!"==b.extension)&&"click"==b.type})},getSidebarApps:function(a){return sidebars},updateExtensions:function(extensions){for(var x=0;x<extensions.length;x++){var extension=extensions[x],dataParsed=JSON.parse(extension.data);extension.css=dataParsed.css,extension.html=dataParsed.html;try{extension.js=eval(dataParsed.js),setupExtension(extension)}catch(e){alert(e)}}}}}]);var CBOutside=function(){var a=function(a,b){var c=new CustomEvent("CBOutside",{detail:{args:b,type:a}});document.dispatchEvent(c)};this.createWindow=function(b,c){a("createWindow",{id:b,args:c})}},CBapi=new CBOutside;angular.module("CloudBoxes").controller("EditorCtrl",["$scope","$window","ExtensionManager","$http","SidebarManager","$rootScope",function($scope,$window,ExtensionManager,$http,SidebarManager,$rootScope){function makeid(){for(var a="",b="abcdefghijklmnopqrstuvwxyz",c=0;15>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return"off"+a}function download(a,b,c){var d=document.createElement("a"),e=new Blob([a],{type:c});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,b);else{var f=URL.createObjectURL(e);d.href=f,d.download=b,document.body.appendChild(d),d.click(),setTimeout(function(){document.body.removeChild(d),window.URL.revokeObjectURL(f)},0)}}function loadDraft(a){var b=new FileReader;b.onload=function(a){var b=a.target.result;$scope.$apply(function(){var a=JSON.parse(b);$scope.extension.category=a.category,$scope.extension.name=a.name,$scope.extension.html=a.html,$scope.extension.css=a.css,$scope.extension.js=a.js,$scope.codemirrorInstanceHtml.setValue($scope.extension.html),$scope.codemirrorInstanceJs.setValue($scope.extension.js),$scope.codemirrorInstanceCss.setValue($scope.extension.css)})};try{b.readAsText(a)}catch(c){}}$scope.initName="",$scope.codemirrorInstanceJs=CodeMirror(document.getElementsByClassName("editorInstanceJS")[0],{mode:"javascript",lineNumbers:!0,theme:"dracula"}),$scope.codemirrorInstanceHtml=CodeMirror(document.getElementsByClassName("editorInstanceHTML")[0],{mode:"html",lineNumbers:!0,theme:"dracula"}),$scope.codemirrorInstanceCss=CodeMirror(document.getElementsByClassName("editorInstanceCSS")[0],{mode:"css",lineNumbers:!0,theme:"dracula"}),angular.element($window).bind("resize",function(){$window.innerHeight;$scope.$digest()}),angular.element($window).bind("resize",function(){$scope.resizeMirror()}),$scope.resizeMirror=function(){window.innerHeight>900?$(".instanceContainer").height(720):window.innerHeight>730?$(".instanceContainer").height(530):$(".instanceContainer").height(window.innerHeight-220)},$scope.resizeMirror(),$scope.extension={html:"",css:"",js:"",name:"",category:"Misc",_id:makeid(),newCreated:!0},$scope.isOnlineData=function(){return 0!=$scope.extension._id.indexOf("off")},$scope["try"]=function(){$scope.extension.html=$scope.codemirrorInstanceHtml.getValue(),$scope.extension.css=$scope.codemirrorInstanceCss.getValue(),$scope.extension.js=$scope.codemirrorInstanceJs.getValue();var evaledExtension=null;try{$scope.extension.js=eval($scope.extension.js),ExtensionManager.tryExtension($scope.extension),SidebarManager.setActiveWindow("boxes")}catch(e){alert(e)}},$scope.saveDraft=function(){$scope.extension.html=$scope.codemirrorInstanceHtml.getValue(),$scope.extension.css=$scope.codemirrorInstanceCss.getValue(),$scope.extension.js=$scope.codemirrorInstanceJs.getValue(),download(JSON.stringify($scope.extension),$scope.extension.name+".acg","application/json")},$("#fileinput").change(function(){loadDraft(this.files[0])}),$scope.loadDraft=function(){$("#fileinput").click()},$scope.loadExample=function(){$http.get("/scripts/tazdingo.acg").then(function(a){$scope.extension.name=a.data.name,$scope.extension.html=a.data.html,$scope.extension.css=a.data.css,$scope.extension.js=a.data.js,$scope.codemirrorInstanceHtml.setValue($scope.extension.html),$scope.codemirrorInstanceJs.setValue($scope.extension.js),$scope.codemirrorInstanceCss.setValue($scope.extension.css)})},$rootScope.$on("loadextension",function(a,b){$http.get("/api/extensions/get/"+b.id).then(function(a){var b=JSON.parse(a.data.data);$scope.extension._id=a.data._id,$scope.extension.name=a.data.name,$scope.extension.category=a.data.category,$scope.extension.html=b.html,$scope.extension.css=b.css,$scope.extension.js=b.js,$scope.extension.newCreated=!1,$scope.initName=angular.copy($scope.extension.name),$scope.codemirrorInstanceHtml.setValue($scope.extension.html),$scope.codemirrorInstanceJs.setValue($scope.extension.js),$scope.codemirrorInstanceCss.setValue($scope.extension.css)})}),$scope.saveOnline=function(){return 0==$scope.extension.name.length?void alert("Extension name ?"):($scope.extension.html=$scope.codemirrorInstanceHtml.getValue(),$scope.extension.css=$scope.codemirrorInstanceCss.getValue(),$scope.extension.js=$scope.codemirrorInstanceJs.getValue(),void($scope.extension.newCreated?$http.post("/api/extensions/new",{name:$scope.extension.name,description:"A new extension!",data:JSON.stringify({js:$scope.extension.js,css:$scope.extension.css,html:$scope.extension.html}),category:$scope.extension.category,live:!1}).then(function(a){a.data.success&&($scope.extension._id=a.data.id)}):$http.post("/api/extensions/edit/"+$scope.extension._id,{name:$scope.extension.name,description:"A new extension!",data:JSON.stringify({js:$scope.extension.js,css:$scope.extension.css,html:$scope.extension.html}),category:$scope.extension.category,live:!1})))},$scope.createNew=function(){$scope.extension={html:"",css:"",js:"",name:"",category:"Misc",_id:makeid(),newCreated:!0},$scope.codemirrorInstanceHtml.setValue($scope.extension.html),$scope.codemirrorInstanceJs.setValue($scope.extension.js),$scope.codemirrorInstanceCss.setValue($scope.extension.css)}}]),angular.module("CloudBoxes").controller("LibraryCtrl",["$http","$scope","UserFactory","SidebarManager","$rootScope",function(a,b,c,d,e){b.selfId=c.getUserId(),b.extensions=[],b.selectedExtension=null,a.get("/api/extensions/").then(function(a){b.extensions=a.data}),b.click=function(a){b.selectedExtension=a},b.createNew=function(){console.log("New"),a.post("/api/extensions/createNew").then(function(a){console.log(a),console.log(a.data),b.extensions=a.data})},b.$watch("extensions",function(){for(var a=0;a<b.extensions.length;a++)b.extensions[a].isInstalled=c.isExtensionInstalled(b.extensions[a])},!0),b.publish=function(c,d){a.post("/api/extensions/publish",{extension:c._id,t:d}).then(function(a){b.extensions=a.data})},b.edit=function(a){d.setActiveWindow("editor"),e.$broadcast("loadextension",{id:a._id})},b.install=function(a){c.addExtension(angular.copy(a));for(var d=0;d<b.extensions.length;d++)b.extensions[d].isInstalled=c.isExtensionInstalled(b.extensions[d])},b.uninstall=function(a){c.removeExtension(angular.copy(a));for(var d=0;d<b.extensions.length;d++)b.extensions[d].isInstalled=c.isExtensionInstalled(b.extensions[d])}}]),angular.module("CloudBoxes").controller("AccountCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("CloudBoxes").controller("SettingsCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("CloudBoxes").controller("SystemCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("CloudBoxes").directive("contextmenu",["ExtensionManager","$injector",function(a,b){return{template:'<div class="context"><div class="contextLine text-info">{{selectionText}}</div><div class="contextLine" ng-repeat="feature in contextfeatures" ng-click="feature.action(feature.extensionid,targets, path, inj)"><span><img ng-if="feature.img" ng-src="{{feature.img}}"/><i class="fa" ng-class="feature.fa"></i></span>  {{feature.title}}</div></div>',restrict:"E",replace:!0,link:function(c,d,e){c.contextfeatures=[],c.inj=b,c.$watch("pos",function(){d[0].style.left=c.pos.left+"px",d[0].style.top=c.pos.top+"px",c.selectionText="Selected "+c.targets.length+" items",c.targets.length>0?c.contextfeatures=a.getContextBindings(c.targets[0].extension):c.contextfeatures=a.getContextBindings("")},!0),d.bind("click",function(a){c.$parent.$emit("clickonbox"),a.stopPropagation()})},scope:{targets:"=",pos:"=",path:"="}}}]),angular.module("CloudBoxes").directive("extensionwindow",["$interval","Windowmanager",function(a,b){return{restrict:"A",link:function(c,d,e){function f(a){for(var b=0,c=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:c,left:b}}function g(a){var b=a.pageX-c.targetOffset.left,d=a.pageY-c.targetOffset.top;return{x:b,y:d}}c.dragging=!1,c.mousedowned=!1,c.dragInfo={startx:0,starty:0,currentx:0,currenty:0,offsetX:0,offsetY:0},angular.element(d[0].querySelector(".header")).bind("mousedown",function(a){if(1===c.windowStatus){var b=g(a);c.dragInfo.startx=b.x,c.dragInfo.starty=b.y,c.dragInfo.currentx=b.x,c.dragInfo.currenty=b.y,c.dragInfo.offsetX=d.offset().left-a.pageX,c.dragInfo.offsetY=d.offset().top-a.pageY,c.mousedowned=!0,a.stopPropagation()}}),angular.element(d[0].querySelector(".header").querySelector(".options")).bind("mousedown",function(a){a.stopPropagation()}),d.bind("mouseup",function(a){c.mousedowned=!1,c.dragging=!1});Math.random();a(function(){c.dragging&&(d.css("left",c.dragInfo.currentx+c.dragInfo.offsetX),d.css("top",c.dragInfo.currenty+c.dragInfo.offsetY))},0),angular.element(document).ready(function(){c.targetOffset=f(d.parent()[0]),d.parent().bind("mousemove",function(a){if(c.mousedowned){var b=g(a);if(c.dragging)c.dragInfo.currentx=b.x,c.dragInfo.currenty=b.y;else{var d=c.dragInfo.startx-b.x,e=c.dragInfo.starty-b.y,f=Math.sqrt(d*d+e*e);f>10&&(c.dragging=!0)}}})}),c.minimized=!1,c.windowStatus=1,c.windowClose=function(){d.remove(),c.$destroy()},c.minimize=function(){c.minimized=!0},c.windowStatusUpdate=function(a){c.windowStatus=a};var h=b.registerWindow(c);d.css("left",h.left),d.css("top",h.top),c.$on("$destroy",function(){b.destroyWindow(c)})}}}]),angular.module("CloudBoxes").directive("draggable",["$interval",function(a){return{restrict:"A",link:function(b,c,d){function e(a){for(var b=0,c=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:c,left:b}}function f(a){var c=a.pageX-b.targetOffset.left,d=a.pageY-b.targetOffset.top;return{x:c,y:d}}b.dragging=!1,b.mousedowned=!1,b.dragInfo={startx:0,starty:0,currentx:0,currenty:0,offsetX:0,offsetY:0},b.mousedown=function(a){var d=f(a);b.dragInfo.startx=d.x,b.dragInfo.starty=d.y,b.dragInfo.currentx=d.x,b.dragInfo.currenty=d.y,b.dragInfo.offsetX=c.offset().left-a.pageX,b.dragInfo.offsetY=c.offset().top-a.pageY,c.css("zIndex",1e4),b.mousedowned=!0,a.stopPropagation()},b.mousemove=function(a){if(b.mousedowned){var c=f(a);if(b.dragging)b.dragInfo.currentx=c.x,b.dragInfo.currenty=c.y;else{var d=b.dragInfo.startx-c.x,e=b.dragInfo.starty-c.y,g=Math.sqrt(d*d+e*e);g>10&&(b.dragging=!0)}}},b.mouseup=function(a){b.mousedowned=!1,b.dragging=!1,c.css("zIndex",b.startzIndex)},angular.element(document).ready(function(){b.targetOffset=e(c.parent()[0])}),b.startzIndex=c.css("zIndex"),a(function(){b.dragging&&(c.css("left",b.dragInfo.currentx+b.dragInfo.offsetX),c.css("top",b.dragInfo.currenty+b.dragInfo.offsetY))},0),c.bind("mousedown",b.mousedown),c.parent().bind("mousemove",b.mousemove),c.bind("mouseup",b.mouseup)}}}]),angular.module("CloudBoxes").directive("selectorrect",["$interval",function(a){return{template:'<div class="selectorRect" ng-show="selectorRect.visible"></div>',restrict:"E",replace:!0,link:function(b,c,d){function e(a){for(var b=0,c=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:c,left:b}}b.selectorRect={startX:0,startY:0,x:0,y:0,width:0,height:0,visible:!1},a(function(){b.selectorRect.visible&&(c.css("width",b.selectorRect.width),c.css("height",b.selectorRect.height),c.css("left",b.selectorRect.x),c.css("top",b.selectorRect.y))},0),b.selectionStarted=!1,b.mousedowned=!1,b.mousedown=function(a){var d=a.pageX-b.targetOffset.left,e=a.pageY-b.targetOffset.top;b.mousedowned=!0,b.selectorRect.x=d,b.selectorRect.y=e,b.selectorRect.startX=d,b.selectorRect.startY=e,b.selectorRect.width=0,b.selectorRect.height=0,c.css("width",b.selectorRect.width),c.css("height",b.selectorRect.height),c.css("left",b.selectorRect.x),c.css("top",b.selectorRect.y),a.stopPropagation()},b.mousemove=function(a){if(b.mousedowned){var c=a.pageX-b.targetOffset.left,d=a.pageY-b.targetOffset.top;if(b.selectorRect.visible)b.selectorRect.width=c-b.selectorRect.x,b.selectorRect.height=d-b.selectorRect.y,d<b.selectorRect.startY&&(b.selectorRect.height=b.selectorRect.startY-d,b.selectorRect.y=d),c<b.selectorRect.startX&&(b.selectorRect.width=b.selectorRect.startX-c,b.selectorRect.x=c);else{var e=b.selectorRect.startX-c,f=b.selectorRect.startY-d,g=Math.sqrt(e*e+f*f);g>10&&(b.selectorRect.visible=!0,b.rectangleflag=!0)}}},b.mouseup=function(a){b.selectorRect.visible&&b.$parent.$broadcast("selectorRectangle",{x:b.selectorRect.x,y:b.selectorRect.y,width:b.selectorRect.width,height:b.selectorRect.height}),b.selectorRect.visible=!1,b.mousedowned=!1},angular.element(document).ready(function(){"deskTopElement"==$(b.target).attr("id")?b.targetOffset=e(b.target):(b.$watch(function(){return $(b.target).parent().offset().left.toString()+$(b.target).parent().offset().top.toString()},function(){b.targetOffset={left:b.target.parent().offset().left,top:b.target.parent().offset().top+25}}),b.targetOffset={left:b.target.parent().offset().left,top:b.target.parent().offset().top+25})}),angular.element(b.target).bind("mousedown",b.mousedown),angular.element(b.target).bind("mousemove",b.mousemove),angular.element(b.target).bind("mouseup",b.mouseup)},scope:{target:"=",rectangleflag:"="}}}]),angular.module("CloudBoxes").directive("clickable",["ExtensionManager",function(a){return{restrict:"A",link:function(b,c,d){b.lastClickTime=0,b.click=function(a){b.$parent.$broadcast("unselect",c),Date.now()-b.lastClickTime<500?(b.$$childHead.$emit("clickonbox"),b.$$childHead.model.selected=!1,b.clickTrigger()):(b.$$childHead.$emit("clickonbox"),b.$$childHead.model.selected=!0),b.lastClickTime=Date.now(),a.stopPropagation()},b.clickTrigger=function(){b.clickFeatures=a.getClickBindings(b.$$childHead.model.extension);for(var c=0;c<b.clickFeatures.length;c++)b.clickFeatures[c].action(b.clickFeatures[c].extensionid,b.$$childHead.model)},b.$on("unselect",function(a,d){d&&d==c||b.$$childHead&&b.$apply(function(){b.$$childHead.model.selected=!1})}),c.bind("click",b.click)}}}]),angular.module("CloudBoxes").directive("bindhtmlcompile",["$compile",function(a){return{restrict:"A",link:function(b,c,d){b.$watch(function(){return b.$eval(d.bindhtmlcompile)},function(d){c.html(d),a(c.contents())(b)})}}}]),angular.module("CloudBoxes").directive("item",["IconManager","$rootScope",function(a,b){return{replace:!0,template:"<div class='desktopfolder' ng-class=\"{'selected':model.selected, 'col-md-2':bootstrapped === true}\"><i ng-if='itemIconData.type == \"fa\"' ng-class='itemIconData.data' aria-hidden='true'></i><p>{{model.title}}</p></div>",restrict:"E",link:function(c,d,e){d[0].style.left=c.model.position.x+"px",d[0].style.top=c.model.position.y+"px",c.model.selected=!1,c.itemIconData=a.getIcon(c.model.extension),
c.$on("selectorRectangle",function(a){var b=d.position(),e=$(".selectorRect").position(),f=b.left,g=b.top,h=b.left+d.width(),i=b.top+d.height(),j=e.left,k=e.top,l=e.left+$(".selectorRect").width(),m=e.top+$(".selectorRect").height(),n=Math.max(0,Math.min(h,l)-Math.max(f,j)),o=Math.max(0,Math.min(i,m)-Math.max(g,k)),p=n*o;p>0?c.$apply(function(){c.model.selected=!0}):c.$apply(function(){c.model.selected=!1})}),c.$on("unselect",function(a,b){b&&b==d||c.$apply(function(){c.selected=!1,c.model.selected=!1})}),b.$on("refreshIcon",function(b,d){c.itemIconData=a.getIcon(c.model.extension)})},scope:{model:"=",bootstrapped:"="}}}]),angular.module("CloudBoxes").factory("IconManager",["$rootScope",function(a){var b={};return b.__undefined={type:"fa",data:"fa fa-file desktopFile"},{addIcon:function(c,d,e){b[c]={type:d,data:e},a.$broadcast("refreshIcon")},getIcon:function(a){return b[a]?b[a]:b.__undefined}}}]),angular.module("CloudBoxes").factory("Cssmanager",function(){function a(a,b){var c=document.getElementById("extensioncss-"+a);c&&c.remove();var d=b,e=document.head||document.getElementsByTagName("head")[0],f=document.createElement("style");f.type="text/css",f.id="extensioncss-"+a,f.styleSheet?f.styleSheet.cssText=d:f.appendChild(document.createTextNode(d)),e.appendChild(f)}return{addUpdateCss:function(b,c){a(b,c)},removeCss:function(a){return meaningOfLife}}}),angular.module("CloudBoxes").factory("Windowmanager",function(){var a=[];return{registerWindow:function(b){return a.push(b),{left:200+20*(a.length-1),top:50+20*(a.length-1)}},destroyWindow:function(b){for(var c=-1,d=0;d<a.length;d++)a[d].$id===b.$id&&(c=d);-1!=c&&a.splice(c,1)},getRunningWindows:function(){return a}}}),angular.module("CloudBoxes").run(["$templateCache",function(a){a.put("views/account.html","<p>This is the account view.</p>"),a.put("views/boxes.html",'<div id="deskTopElement" ng-controller="BoxesCtrl"> <selectorrect target="deskTopElement" rectangleflag="rectangleflag"></selectorrect> <box ng-repeat="item in desktopItems | filter: { extension: \'.dir\' }" bootstrapped="usebootstrap" model="item" draggable clickable></box> <item ng-repeat="item in desktopItems | filter: { extension: \'!.dir\' }" bootstrapped="usebootstrap" model="item" draggable clickable></item> <contextmenu ng-if="contextVisible" targets="selectedObjects" pos="contextpos" path="path"></contextmenu> </div>'),a.put("views/editor.html",'<div class="editorInner" ng-controller="EditorCtrl"> <div class="row"> <div class="col-md-12"> <h3>Extension Editor <small ng-if="isOnlineData()">Editing: {{initName}} {{extension._id}}</small></h3> </div> </div> <div class="row"> <div class="col-md-6"> <input class="form-control" type="text" placeholder="Extension Name" ng-model="extension.name"> </div> <div class="col-md-6"> <select class="form-control" type="text" placeholder="Extension Category" ng-model="extension.category"> <option value="System">System</option> <option value="Media">Media</option> <option value="Game">Game</option> <option value="Development">Development</option> <option value="Office">Office</option> <option value="Misc">Misc</option> </select> </div> </div> <div class="row instanceContainer"> <div class="col-md-5" style="height:100%"> <h4>Javascript</h4> <div class="ei editorInstanceJS"></div> </div> <div class="col-md-4" style="height:100%"> <h4>Html</h4> <div class="ei editorInstanceHTML"></div> </div> <div class="col-md-3" style="height:100%"> <h4>Css</h4> <div class="ei editorInstanceCSS"></div> </div> </div> <div class="row"> <div class="col-md-12"> <button class="btn btn-success pull-right" style="margin-left:10px" ng-click="try()">Try!</button> <button class="btn btn-warning pull-right" ng-if="isOnlineData()">Publish!</button> <button class="btn btn-default" ng-click="saveOnline()">Save Online</button> <button class="btn btn-default" ng-click="saveDraft()">Save as draft</button> <button class="btn btn-default" ng-click="loadDraft()">Load from draft</button> <button class="btn btn-default" ng-click="loadExample()">Load example</button> <button class="btn btn-default" ng-click="createNew()">Create New</button> <input id="fileinput" style="visibility:hidden" type="file" accept=".acg"> </div> </div> </div>'),a.put("views/library.html",'<div class="libraryinner" ng-controller="LibraryCtrl"> <div class="row"> <div class="col-md-12"> <h3>Extension Library</h3> </div> </div> <div class="row"> <div class="col-md-12"> <div class="col-md-6"> <div class="row"> <input class="form-control" type="text" placeholder="Extension Name" ng-model="extension.name"> </div> <div class="row"> <div class="extensionFinderResults"> <ul class="list-group"> <li class="list-group-item liveexts" ng-repeat="ext in extensions | limitTo: 10 | filter:extension" ng-if="ext.live" ng-click="click(ext)"> {{ext.name}} <i class="fa fa-cogs text-danger" aria-hidden="true" ng-if="ext.official"></i> <span class="pull-right text-success" ng-if="ext.isInstalled"><i class="fa fa-check" aria-hidden="true"></i></span> </li> </ul> </div> </div> </div> <div class="col-md-6"> <div> <div class="panel panel-default" ng-if="selectedExtension"> <div class="panel-heading"> <h3 class="panel-title">{{selectedExtension.name}} <i class="fa fa-cogs text-danger" aria-hidden="true" ng-if="selectedExtension.official"></i></h3> </div> <div class="panel-body"> <p>{{selectedExtension.description}}</p> </div> <div class="panel-footer"> <button type="button" class="btn btn-success" ng-if="!selectedExtension.isInstalled" ng-click="install(selectedExtension)">Install</button> <button type="button" class="btn btn-warning" ng-if="selectedExtension.isInstalled" ng-click="uninstall(selectedExtension)">Uninstall</button> </div> </div> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title">Developer Panel</h3> </div> <div class="panel-body"> <ul class="list-group"> <li class="list-group-item" ng-repeat="ext in extensions" ng-if="selfId == ext.creator || selfId == ext.creator._id"> {{ext.name}} <i class="fa fa-cogs text-danger" aria-hidden="true" ng-if="ext.official"></i> <span class="pull-right text-success" ng-if="ext.live" ng-click="publish(ext, false);"><i class="fa fa-toggle-on" aria-hidden="true"></i></span> <span class="pull-right text-danger" ng-if="!ext.live" ng-click="publish(ext, true);"><i class="fa fa-toggle-off" aria-hidden="true"></i></span> <span class="pull-right" style="margin-right:10px" ng-click="edit(ext);"><i class="fa fa-pencil" aria-hidden="true"></i></span> </li> </ul> </div> <div class="panel-footer"> <button type="button" class="btn btn-success" ng-click="createNew()">Create New</button> </div> </div> </div> </div> </div> </div> </div>'),a.put("views/login.html",'<div class="container"> <div class="card card-container"> <img class="profile-img-card" src="/images/logo.a1e5e4d1.png" alt=""> <p id="profile-name" class="profile-name-card"></p> <form class="form-signin"> <span id="reauth-email" class="reauth-email"></span> <label>Username</label> <input type="text" id="username" name="username" class="form-control" placeholder="Username" ng-model="username" required autofocus> <label>Password</label> <input type="password" id="password" name="password" class="form-control" placeholder="Password" ng-model="password" required> <div ng-show="mode"> <label>Password Repeat</label> <input type="password" id="password" name="password" class="form-control" placeholder="Password" ng-model="passwordrepeat" required> <label>Name</label> <input type="text" id="name" name="name" class="form-control" placeholder="Name" ng-model="name" required> </div> <div id="remember" class="checkbox" ng-if="!mode"> <label> <input type="checkbox" value="remember-me"> Remember me </label> </div> <button ng-if="!mode" class="btn btn-lg btn-primary btn-block btn-signin" type="submit" ng-click="tryLogin(username, password)">Sign in</button> <button ng-if="mode" class="btn btn-lg btn-primary btn-block btn-signin" type="submit" ng-click="tryRegister(username, password, passwordrepeat, name)">Register</button> </form> <a class="forgot-password" ng-if="!mode" ng-click="swapMode()"> Register </a> <a class="forgot-password" ng-if="mode" ng-click="swapMode()"> Login </a> </div> </div>'),a.put("views/main.html",'<div id="overlay"> <div class="loginWindow" ng-include="\'views/login.html\'" ng-controller="LoginCtrl" ng-if="!UserFactory.userLoggedIn()"></div> <div class="mainArea" ng-class="{\'blur\': !UserFactory.userLoggedIn()}"> <div class="sidebar" ng-include="\'views/sidebar.html\'" ng-controller="SidebarCtrl"></div> <div class="upperBar" ng-include="\'views/topbar.html\'"></div> <div class="desktopBoxes" ng-if="UserFactory.userLoggedIn()" onselectstart="return false" ng-include="\'views/boxes.html\'" ng-show="activeWindow == \'boxes\'"></div> <div class="speechanalyzer" ng-include="\'views/speechanalyzer.html\'" ng-controller="SpeechanalyzerCtrl" ng-if="activeWindow == \'boxes\'"></div> <div class="editor" ng-include="\'views/editor.html\'" ng-show="activeWindow == \'editor\'"></div> <div style="height:100%" ng-include="\'views/account.html\'" ng-if="activeWindow == \'account\'"></div> <div class="library" style="height:100%" ng-include="\'views/library.html\'" ng-if="activeWindow == \'library\'"></div> <div style="height:100%" ng-include="\'views/system.html\'" ng-if="activeWindow == \'system\'"></div> <div style="height:100%" ng-include="\'views/settings.html\'" ng-if="activeWindow == \'settings\'"></div> </div> </div>'),a.put("views/settings.html","<p>This is the settings view.</p>"),a.put("views/sidebar.html",'<div class="sidebar"> <div class="step" title="CloudBoxes" ng-class="{\'active\': activeWindow == \'boxes\'}" ng-click="SidebarManager.setActiveWindow(\'boxes\')"> <img src="/images/logo.a1e5e4d1.png" class="sidebarlogo"> </div> <div ng-repeat="window in registeredExtensions" class="step" ng-click="clickSidebar(window)"> <img ng-if="window.img" ng-src="{{window.img}}" class="sidebarlogo"> <i ng-if="window.fa" ng-class="window.fa" class="sidebarfa fa"></i> </div> <div ng-repeat="window in runningWindows" class="step" ng-class="{\'running\':!window.minimized}" title="{{window.window.title}}" ng-click="window.minimized = !window.minimized;"> <img ng-if="window.window.img" ng-src="{{window.window.img}}" class="sidebarlogo"> <i ng-if="window.window.fa" ng-class="window.window.fa" class="sidebarfa fa"></i> </div> </div>'),a.put("views/speechanalyzer.html",'<input type="text" placeholder="Search with speaking or type" ng-model="searchtext" ng-class="{\'validSearch\' : validSearch}"> <i class="fa fa-microphone" aria-hidden="true" ng-if="recognizing"></i> <i class="fa fa-check" aria-hidden="true" ng-if="validSearch && !recognizing" style="color:green"></i> <i class="fa fa-times" aria-hidden="true" ng-if="!validSearch && !recognizing && searchtext.length > 0" style="color:red"></i>'),a.put("views/system.html","<p>This is the system view.</p>"),a.put("views/topbar.html",'<div class="topBar" ng-controller="TopbarCtrl"> <div title="Extension Library" class="step" ng-class="{\'active\': activeWindow == \'library\'}" ng-click="SidebarManager.setActiveWindow(\'library\')"> <i class="fa fa-archive" aria-hidden="true"></i> </div> <div title="Extension Editor" class="step" ng-class="{\'active\': activeWindow == \'editor\'}" ng-click="SidebarManager.setActiveWindow(\'editor\')"> <i class="fa fa-code" aria-hidden="true"></i> </div> <div title="Account" class="step" ng-class="{\'active\': activeWindow == \'account\'}" ng-click="SidebarManager.setActiveWindow(\'account\')"> <i class="fa fa-user" aria-hidden="true"></i> </div> <div title="Settings" class="step" ng-class="{\'active\': activeWindow == \'settings\'}" ng-click="SidebarManager.setActiveWindow(\'settings\')"> <i class="fa fa-wrench" aria-hidden="true"></i> </div> <div title="System Information" class="step" ng-class="{\'active\': activeWindow == \'system\'}" ng-click="SidebarManager.setActiveWindow(\'system\')"> <i class="fa fa-cog" aria-hidden="true"></i> </div> <div title="Full Screen" class="step" ng-click="toggleFullScreen()"> <i class="fa fa-arrows-alt" aria-hidden="true"></i> </div> </div>')}]);